**It’s \~90 % complete.**
Below are the small edits that will push it to a true “first-cut 100 %” spec.

| # | Edit / add-on                                                                                                                                                                                                    | Why it matters                                                            |
| - | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| 1 | **Explicit “Planner → Timeline” tool** (bridge between script lines and FFmpeg).<br>• Single function that converts the agent’s high-level plan into a `timeline[]` DTO.<br>• Lives in `agent/tools/planner.py`. | Without this adapter the other tools don’t know *when* to fire.           |
| 2 | **Central `settings.py`** for<span style="white-space:nowrap;">—</span><br>• model choice (`GPT-4o`, fallback),<br>• default transition list,<br>• S3/Replit-DB paths,<br>• FFmpeg-binary location.              | Gives every tool the same knobs & keeps parameters minimal at call-sites. |
| 3 | **Persistent asset + output store** in initial version (S3 bucket or `replit.db`).                                                                                                                               | Otherwise rendered videos vanish when the worker pod restarts.            |
| 4 | **Single “FFmpeg FX” compiler tool** that ingests `timeline[]` and emits one `filter_complex` string, not scattered commands.                                                                                    | Guarantees deterministic renders and simpler debugging.                   |
| 5 | **Docker-compose stub** (API, Celery worker, Redis, FFmpeg-enabled image).                                                                                                                                       | Replit needs the compose file to start the stack in one click.            |
| 6 | **Job-status endpoint** `/status/{job_id}` (FastAPI) with Redis lookup.                                                                                                                                          | Frontend has something to poll instead of scraping logs.                  |
| 7 | **Basic rule-engine stub** (end with logo, max 60 s, no duplicate transitions).                                                                                                                                  | Keeps generation “creative but safe” from day 1.                          |
| 8 | **Structured logging + error capture** (e.g., `structlog` + Sentry DSN placeholder).                                                                                                                             | Helps you debug failed renders without digging through raw FFmpeg output. |
| 9 | **Minimal Jest-style test (or PyTest)** for the planner and FFmpeg compiler.                                                                                                                                     | Prevents silent timeline/command regressions as you add tools.            |

Tick these nine boxes and the plan is fully self-contained and reproducible on Replit.
